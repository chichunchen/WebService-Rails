package controllers;

import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SendEmail
{
	String subject = "";
	String body = "";
	
	public SendEmail(String subject, String body){
		this.subject = subject;
		this.body = body;
	}
	
	public void setData(String subject, String body){
		this.subject = subject;
		this.body = body;
	}
	
   public void send() throws Exception
   {    
      // Recipient's email ID needs to be mentioned.
      String to = "img6859@gmail.com";

      // Sender's email ID needs to be mentioned
      String from = "chchen.iim99g@nctu.edu.tw";
      
      Properties props = new Properties();
      props.setProperty("mail.transport.protocol", "smtp");
      props.setProperty("mail.host", "d2smtp.nctu.edu.tw");
      props.setProperty("mail.user", "chchen.iim99g");
      props.setProperty("mail.password", "ChiHua0826pfaxrark");

      // Get the default Session object.
      Session session = Session.getDefaultInstance(props);

   // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(session);

      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));

      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));

      // Set Subject: header field
      message.setSubject(subject);

      // Now set the actual message
      message.setText(body);

      // Send message
      Transport.send(message);
   }
}
